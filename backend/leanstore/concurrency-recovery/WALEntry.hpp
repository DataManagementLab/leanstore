#pragma once
#include "Units.hpp"
#include "Worker.hpp"
// -------------------------------------------------------------------------------------
// -------------------------------------------------------------------------------------
#include <atomic>
// -------------------------------------------------------------------------------------
namespace leanstore
{
namespace cr
{
// -------------------------------------------------------------------------------------
struct WALEntry {
   enum class TYPE : u8 { TX_START, TX_COMMIT, TX_ABORT, DT_SPECIFIC, CARRIAGE_RETURN };
   // -------------------------------------------------------------------------------------
   u16 size;
   TYPE type;
   std::atomic<LID> lsn;
   u64 magic_debugging_number = 99;
};
// -------------------------------------------------------------------------------------
struct WALMetaEntry : WALEntry {
   u8 payload[];
};
// -------------------------------------------------------------------------------------
struct WALDTEntry : WALEntry {
   LID gsn;
   DTID dt_id;
   PID pid;
   u8 payload[];
};
// -------------------------------------------------------------------------------------
}  // namespace cr
}  // namespace leanstore
